\chapter{Measure Theory}

\section{Measurable Spaces}

Given a set $S$, on what collection $\mathfrak{S}$ of subsets of $S$ are suitable to be a domain of measure?

\begin{definition}
	Let $S$ be a set and $\mathfrak{S}$ be a family of subsets of $S$. Then $\mathfrak{S}$ is called a \textbf{$\sigma$-algebra} on $S$ if
	\begin{enumerate}
		\item $\emptyset, S \in \mathfrak{S}$.
		\item If $A \in \mathfrak{S}$, then $A^c \in \mathfrak{S}$.
		\item If $A_1, A_2, \ldots \in \mathfrak{S}$, then $\bigcup_{i=1}^\infty A_i \in \mathfrak{S}$.
	\end{enumerate}

	The pair $(S, \mathfrak{S})$ is said to be a \textbf{measurable space}, and any subset $A \subseteq \mathfrak{S}$ is called an \textbf{$\mathfrak{S}$-measurable set}.
\end{definition}

For any set $S$ and any collection $\mathfrak{A}$ of subsets of $S$ there is at least one $\sigma$-algebra containing $\mathfrak{A}$: the family of all subsets of $S$. Taking the intersection of all the $\sigma$-algebras containing $\mathfrak{A}$, we obtain the smallest $\sigma$-algebra containing $\mathfrak{A}$, which is called the \textbf{$\sigma$-algebra generated by $\mathfrak{A}$}.

Particularlly, the smallest $\sigma$-algebra containing all of the open sets of $\textbf{R}$ is called the \textbf{Boreal algebra} for $\textbf{R}$ and is denoted by $\mathfrak{B}$. Any set in $\mathfrak{B}$ is called a \textbf{Borel set}.

\section{Measures}

Now, how can we assign a size (or a probability) to all the sets in $\mathfrak{S}$?

\begin{definition}
	Let $(S, \mathfrak{S})$ be a measurable space. A \textbf{measure} is an extended real-valued function $\mu : \mathfrak{S} \longrightarrow \overline{\textbf{R}}$ such that 
	\begin{enumerate}
		\item $\mu ( \emptyset ) = 0$;
		\item $\mu(A) \geq 0$, for all $A \in \mathfrak{S}$;
		\item If $(A_n)_{n=1}^\infty$ is a countable, disjoint sequence of subsets in $\mathfrak{S}$, then $\mu(\bigcup_{n=1}^\infty A_n) = \sum_{n=1}^\infty \mu(A_n)$.
	\end{enumerate}

	The triple $(S, \mathfrak{S}, \mu)$ is called a \textbf{measure space}.
\end{definition}

A measure is nonnegative, assigns zero to the null set, and is \textbf{countably additive}. If $\mu(S) < \infty$, then $\mu$ is finite.

We say that a proposition holds \textbf{almost everywhere (a.e.)} if there exists a set $A \in \mathfrak{S}$ with $\mu(A) = 0$, such that the proposition holds on the complement of $A$. Intuitively, the proposition holds everywhere except on sets of measure zero.

For example, a sequence of functions $(f_n)$ on $S$ converges a.e. to a function $f$ if there exists $A \in \mathfrak{S}$ with $\mu(A) = 0$ such that $\lim_{n \to \infty} f_n(x) = f(x)$ for all $x \in A^c$.

If $\mu(S) = 1$, then $\mu$ is a \textbf{probability measure} and $(S, \mathfrak{S}, \mu)$ is called a \textbf{probability space}. Any measurable set $A \in \mathfrak{S}$ is called and \textbf{event} and $\mu(A)$ is the \textbf{probability of the event $A$}. In a probability space, the phrase \textbf{almost surely (a.s.)} is used interchangeably with `almost everywhere'.

Notice that if $A, B \in \mathfrak{S}$ and $A \subseteq B$, then $\mu(A) \leq \mu(B)$. If $\mu(A) < \infty$, then $\mu(B \setminus A) = \mu(B) - \mu(A)$.

\begin{theorem}
	Let $(S, \mathfrak{S}, \mu)$ be a measure space.
	\begin{enumerate}
		\item If $(A_n)_{n=1}^\infty$ is an increasing sequence in $\mathfrak{S}$ (i.e. if $A_n \subseteq A_{n+1}$ for all $n$), then \[ \mu \left( \bigcup_{n=1}^\infty A_n \right) = \lim_{n \to \infty} \mu(A_n) \] 
		\item If $(B_n)_{n=1}^\infty$ is a decreasing sequence in $\mathfrak{S}$ (i.e. if $B_{n+1} \subseteq B_n$ for all $n$) and if $\mu(B_m) < \infty$ for some $m$, then \[ \mu \left( \bigcap_{n=1}^\infty B_n \right) = \lim_{n \to \infty} \mu(B_n) \] 
	\end{enumerate}
\end{theorem}

First, we define a measure on a small family of sets and then present an extension theorem.

\begin{definition}
	Let $S$ be a set and $\mathfrak{A}$ be a family of subsets of $S$. Then $\mathfrak{A}$ is called an \textbf{algebra} if 
	\begin{enumerate}
		\item $\emptyset, S \in \mathfrak{A}$;
		\item $A \in \mathfrak{A}$ implies $A^c \in \mathfrak{A}$;
		\item $A_1, A_2, \ldots, A_n \in \mathfrak{A}$ implies $\bigcup_{i=1}^n A_i \in \mathfrak{A}$.
	\end{enumerate}
\end{definition}

I.e., an algebra is closed under complementation and finite union. On an algebra, the idea of measure is very much similar to the definition on a $\sigma$-algebra.

\begin{definition}
	Let $S$ be a set, and let $\mathfrak{A}$ be an algebra of subsets of $S$. A \textbf{measure} is a real-valued function $\mu : \mathfrak{A} \longrightarrow \overline{\textbf{R}}$ such that 
	\begin{enumerate}
		\item $\mu ( \emptyset ) = 0$;
		\item $\mu(A) \geq 0$, for all $A \in \mathfrak{A}$;
		\item If $(A_n)_{n=1}^\infty$ is a disjoint sequence of sets in $\mathfrak{A}$ with $\bigcup_{n=1}^\infty A_n \in \mathfrak{A}$, then $\mu \left( \bigcup_{n=1}^\infty A_n \right) = \sum_{n=1}^\infty \mu(A_n)$.
	\end{enumerate}
\end{definition}

Notice that last item is different from the definition on a $\sigma$-algebra. Here, we require that the union is contained in the algebra.

Although it is easier to define measures on algebras, it is more convenient to work with $\sigma$-algebras.

\begin{theorem}[Caratheodory Extension Theorem]\label{thm:caratheodory}
	Let $S$ be a set, $\mathfrak{A}$ an algebra of its subsets, and $\mu$ a measure on $\mathfrak{A}$. Let $\mathfrak{S}$ be the smallest $\sigma$-algebra containing $\mathfrak{A}$. Then there exists a measure $\mu^{\ast}$ on $\mathfrak{S}$ such that $\mu(A) = \mu^{\ast}(A)$, for all $A \in \mathfrak{A}$.
\end{theorem}

To rule out the possibility of more than one extension of $\mu$ to $\mathfrak{S}$, we'll need the following definition

\begin{definition}
	Let $S$ be a set, $\mathfrak{A}$ an algebra of its subsets, and $\mu$ a measure on $\mathfrak{A}$. If there is a countable sequence of sets $(A_i)_{i=1}^\infty \in \mathfrak{A}$ with $\mu(A_i) < \infty$ for all $i$, and $S = \bigcup_{i=1}^\infty A_i$, then $\mu$ is called \textbf{$\sigma$-finite}.
\end{definition}

By definition, any probability measure is $\sigma$-finite. And the next theorem shows that the extension of a $\sigma$-finite measure is unique.

\begin{theorem}[Hahn Extension Theorem]
	Let $S$, $\mathfrak{A}$, $\mu$ and $\mathfrak{S}$ be as specified in \hyperref[thm:caratheodory]{Caratheodory Extension Theorem}. If $\mu$ is $\sigma$-finite, then the extension $\mu^{\ast}$ to $\mathfrak{S}$ is unique.
\end{theorem}

\begin{definition}
	Let $(S, \mathfrak{S}, \mu)$ be a measure space, $A \in \mathfrak{S}$ be any set with measure zero, and let $C \subseteq A$. Denoting by $\mathfrak{C}$ the family of such sets $C$, i.e.,
	\[
		\mathfrak{C} = \{ C \subset S : C \subseteq A \text{ for some } A \in \mathfrak{S} \text{ with } \mu(A) = 0 \}
	\]

	The \textbf{completion} of $\mathfrak{S}$ is the family $\mathfrak{S}'$ constructed by starting with any set $B \in \mathfrak{S}$, and then adding and subtracting from it sets in $\mathfrak{C}$. That is 
	\[
		\mathfrak{S}' = \{ B' \subseteq S : B' = (B \cup C_1) \setminus C_2, \, B \in \mathfrak{S}, \, C_1, C_2 \in \mathfrak{C} \} 
	\]
\end{definition}

Intuitively, $\mathfrak{S}'$ consists of all the subsetes of $S$ that differ from a set in $\mathfrak{S}$ by a setset of a set of $\mu$-measure zero. Using this definition, a measure $\mu$ on $(S, \mathfrak{S})$ can be extended to $(S, \mathfrak{S}')$.

\section{Measurable Functions}

\begin{definition}
	Given a measurable space $(S, \mathfrak{S})$, a real-valued function $f : S \longrightarrow \textbf{R}$ is \textbf{measurable with respect to $\mathfrak{S}$} (or \textbf{$\mathfrak{S}$-measurable}) if 
	\[
		\{ s \in S : f(s) \leq a \} \in \mathfrak{S}, \, \forall a \in \textbf{R}
	\]
\end{definition}

If the space is a probability space, then $f$ is called a \textbf{random variable}.

Some cases in which measurability can be easily verified:
\begin{itemize}
	\item Any monotone or continuous function $f : \textbf{R} \longrightarrow \textbf{R}$ is measurable with respect to Borel sets.
	\item If $S$ is a countable set and $\mathfrak{S}$ is a complete $\sigma$-algebra for $S$ (i.e. contains all subsets of $S$), then all functions $f : S \longrightarrow \textbf{R}$ are $\mathfrak{S}$-measurable.
\end{itemize}

In more general cases, the measurability of a function is established by showing that it is the limit of a sequence of `simpler' functions. We'll do this progressively.

First, let $(S, \mathfrak{S})$ be a measurable space and consider the indicator function $\chi_A : S \longrightarrow \textbf{R}$ of the from
\[
\chi_A (s) = \begin{cases}
	1, & \text{if } s \in A\\
	0, & \text{if } s \notin A
	\end{cases}
\]
Clearly, $\chi_A$ is $\mathfrak{S}$-measurable iff. $A \in \mathfrak{S}$.

Now, consider the finite weighted sums of indicator functions:
\[
	\varphi(s) = \sum_{i=1}^n a_i \chi_{A_i}(s)
\]
where $(A_i)_{i=1}^n$ is a sequence of subsets of $S$, and $(a_i)_{i=1}^n$ is a sequence of real numbers. Functions like this are called \textbf{simple functions}.

If the sets $(A_i)$ form a partition of $S$ and if all of the values $a_i$ are distinct, then the previous equation is the \textbf{standard representation} of the function. If this is the case, then $\varphi$ is measurable iff. each $A_i \in \mathfrak{S}$.

As we'll see in the next two theorems, the set of all measurable functions consists of those that are pointwise limits of measurable simple functions.

First, any function $f$ that is pointwise limit of a sequence $(f_n)$ of measurable function is itself measurable.

\begin{theorem}[Pointwise convergence preserves measurability]
	Let $(S, \mathfrak{S})$ be a measurable space, and let $(f_n)$ be a sequence of $\mathfrak{S}$-measurable functions converging pointwise to $f$, i.e.,
	\[
		\lim_{n \to \infty} f_n(s) = f(s), \, \forall s \in S
	\]

	Then $f$ is also $\mathfrak{S}$-measurable.
\end{theorem}

Second, any measurable function $f$ can be expressed as the pointwise limit of a sequence $(\varphi_n)$ of measurable simple functions. If $f$ is nonnegative, the sequence can be chosen to be strictly increasing. And if $f$ is bounded, the sequence can be chosen to converge uniformly.

The idea is that we can construct a class of measurable functions by taking the class of measurable simple function and then closing this under pointwise convergence. The next result shows that this set contains all the measurable functions.

\begin{theorem}[Approximation of measurable functions by simple functions]
	Let $(S, \mathfrak{S})$ be a measurable space. If $f : S \longrightarrow \textbf{R}$ is $\mathfrak{S}$-measurable, then there exists a sequence of measurable simple functions $(\varphi_n)$ such that $\varphi_n \longrightarrow f$ pointwise. If $0 \leq f$, then the sequence can be chosen so that 
	\[
		0 \leq \varphi_n \leq \varphi_{n+1} \leq f
	\]
	for all $n$. If $f$ is bounded, then the sequence can be chosen so that $\varphi_n \longrightarrow f$ uniformly.
\end{theorem}

With these two theorems, we see that a function is measurable iff. it is the pointwise limit of a sequence of measurable simple functions. The standard way to prove that a function is measurable is to find such an approximation.

Some important properties follow. Suppose that $f$ and $g$ are $\mathfrak{S}$-measurable functions on $S$ and $c \in \textbf{R}$. Then,
\begin{itemize}
	\item The functions $f + g$, $f \cdot g$, $|f|$ and $c \cdot f$ are $\mathfrak{S}$-measurable.
	\item If $(f_n)$ is a sequence of $\mathfrak{S}$-measurable functions, then $\inf f_n$, $\sup f_n$, $\liminf f_n$ and $\limsup f_n$ are all $\mathfrak{S}$-measurable.
	\item All continuous functions on $\textbf{R}^l$ are $\mathfrak{B}^l$-measurable.
	\item The composition of Borel measurable functions are Borel measurable. However, this is not true for Lebesgue measurable functions.
\end{itemize}

\begin{definition}
	Let $(S, \mathfrak{S})$ and $(T, \mathfrak{T})$ be measurable spaces. Then the function $f : S \longrightarrow T$ is \textbf{measurable} if the inverse image of every measurable set is measurable, i.e., 
	\[
		\{ s \in S : f(s) \in A \} \in \mathfrak{S}, \, \forall A \in \mathfrak{T}
	\]
\end{definition}

Hence, if $(S, \mathfrak{S})$, $(T, \mathfrak{T})$, and $(U, \mathfrak{U})$ are measurable spaces, and $f : S \longrightarrow T$ and $g : T \longrightarrow U$ are measurable functions, then $h : S \longrightarrow U$ defined by $h(s) = g \circ f(s)$ is a measurable function.

\begin{definition}[Measurable selection]
	Let $(S, \mathfrak{S})$ and $(T, \mathfrak{T})$ be measurable spaces, and let $\Gamma$ be a correspondence of $S$ into $T$. Then the function $h : S \longrightarrow T$ is a \textbf{measurable selection from $\Gamma$} if $h$ is measurable and $h(s) \in \Gamma(s)$, for all $s \in S$.
\end{definition}

\begin{theorem}[Measurable Selection]
	Let $S \subseteq \textbf{R}^l$ and $T \subseteq \textbf{R}^m$ be Borel sets, with their Borel subsets $\mathfrak{S}$ and $\mathfrak{T}$. Let $\Gamma : S \longrightarrow T$ be a nonempty compact-valued and upper hemi-continuous (UHC) correspondence. Then there exists a measurable selection from $\Gamma$.
\end{theorem}

\section{Integration}

Let $(S, \mathfrak{S}, \mu)$ be a fixed measure space and $M(S, \mathfrak{S})$ be the space of measurable, extended real-valued functions on $S$. 

For a nonnegative, measurable and simple function, we have the following definition.

\begin{definition}
	Let $\varphi \in M^+(S, \mathfrak{S})$ be a measurable simple function, with the standard representation $\varphi(s) = \sum_{i=1}^n a_i \chi_{A_i}(s)$. Then the \textbf{integral of $\varphi$ with respect to $\mu$} is 
	\[
		\int_S \varphi(s) \, \mu(\mathrm{d} s) = \sum_{i=1}^n a_i \mu(A_i)
	\]
\end{definition}

To extended from simple functions to all $M^+(S, \mathfrak{S})$, we define

\begin{definition}
	For $f \in M^+(S, \mathfrak{S})$, the \textbf{integral of $f$ with respect to $\mu$} is 
	\[
		\int_A f(s) \, \mu(\mathrm{d}s) = \int_S f(s) \chi_A (s) \mu(\mathrm{d}s)
	\]
	We also denote the integrals above as $\int f \, \mathrm{d} \mu$ and $\int_A f \, \mathrm{d} \mu$. 
\end{definition}

Since any function $f \in M^+(S, \mathfrak{S})$ can be expressed as the limit of an increasing sequence $(\varphi_n)$ of simple functions in $M^+(S, \mathfrak{S})$. However, we cannot define the integral as the limit of such a sequence because it would leave open the possibility that the limit depends on the particular sequence chosen. The Monotone Convergence Theorem shows that the limit value is unique.

Before that, the following result shows that a simple function on a measure space can be used to define a new measure on the space.

\begin{lemma}
	If $\varphi \in M^+(S, \mathfrak{S})$ is a simple function and $\lambda: \mathfrak{S} \longrightarrow \textbf{R}$ is defined by
	\[
		\lambda(A) = \int_A \varphi\, \mathrm{d}\mu 
	\]
	for all $A \in \mathfrak{S}$, then $\lambda$ is a measure on $\mathfrak{S}$.
\end{lemma}

\begin{theorem}[Monotone Convergence Theorem]
	If $(f_n)$ is a monotone increasing sequence of functions in $M^+(S, \mathfrak{S})$ converging pointwise to $f$ then 
	\[
		\int f\, \mathrm{d}\mu = \lim_{n \to \infty} \int f_n \, \mathrm{d} \mu
	\]
\end{theorem}

Some important properties:

\begin{enumerate}
	\item If $f, g \in M^+(S, \mathfrak{S})$ and $c \geq 0$, then 
	\[
		\int (f+g)\, \mathrm{d}\mu = \int f\, \mathrm{d}\mu + \int g\, \mathrm{d}\mu
	\]
	and
	\[
		\int c\cdot f \, \mathrm{d}\mu = c \int f\, \mathrm{d}\mu
	\]
	\item If $f, g \in M^+(S, \mathfrak{S})$ and $f \leq g$, then
	\[
		\int f\, \mathrm{d}\mu \leq \int g\, \mathrm{d}\mu
	\]
	\item If $f \in M^+(S, \mathfrak{S})$ and $A, B \in \mathfrak{S}$ with $A \subseteq B$, then
	\[
		\int_A f\, \mathrm{d}\mu \leq \int_B f\, \mathrm{d}\mu
	\]
	\item If $f \in M^+(S, \mathfrak{S})$ and $A \in \mathfrak{S}$ with $\mu(A) = 0$, then
	\[
		\int_A f\, \mathrm{d}\mu = 0
	\]
	\item If $f \in M^+(S, \mathfrak{S})$, $\int_S f\, \mathrm{d}\mu < \infty$, and $A = \{ s \in S : f(s) = +\infty \}$, then $\mu(A) = 0$.
	\item If $f \in M^+(S, \mathfrak{S})$ and $\lambda : \mathfrak{S} \longrightarrow \textbf{R}_+$, defined as $\lambda(A) = \int_A f\, \mathrm{d}\mu$ for all $A \in \mathfrak{S}$, then $\lambda$ is a measure on $(S, \mathfrak{S})$.
	\item Let $(g_i)$ be a sequence of functions in $M^+(S, \mathfrak{S})$. Then 
	\[
		\int \left( \sum_{i=1}^n g_i \right)\, \mathrm{d}\mu = \sum_{i=1}^n \int g_i\, \mathrm{d}\mu
	\]
\end{enumerate}

\begin{lemma}[Fatou's Lemma]
	If $(f_n)$ is a sequence of functions in $M^+(S, \mathfrak{S})$, then
	\[
		\int (\liminf f_n)\, \mathrm{d}\mu \leq \liminf \int f_n\, \mathrm{d}\mu
	\]
\end{lemma}

To generalize to functions that take on both positive and negative values, we begin by defining the positive and negative parts of a function $f^+$ and $f^-$.
\begin{equation*}
	f^+(s) = 
    \begin{cases}
      f(s), \, &\text{ if } f(s) \geq 0 \\
	  0, \, &\text{ if } f(s) < 0
    \end{cases}
\end{equation*}
and
\begin{equation*}
	f^-(s) = 
    \begin{cases}
      -f(s), \, &\text{ if } f(s) \leq 0 \\
	  0, \, &\text{ if } f(s) > 0
    \end{cases}
\end{equation*}

Hence, if $f$ is measurable, $f^+$ and $f^-$ are both in $M^+(S, \mathfrak{S})$ and $f = f^+ - f^-$. This motivates the following generalization.

\begin{definition}
	Let $(S, \mathfrak{S}, \mu)$ be a measure space, and let $f$ be a measurable real-valued function on $S$. If $f^+$ and $f^-$ both have finite integrals with respect to $\mu$, then $f$ is integrable and the \textbf{integral of $f$ with respect to $\mu$} is 
	\[
		\int f \, \mathrm{d}\mu = \int f^+ \, \mathrm{d}\mu - \int f^- \, \mathrm{d}\mu
	\]
\end{definition}

In probability, if $(S, \mathfrak{S}, \mu)$ is a probability space and $f$ is a measurable function, then $f$ is a random variable. And if $f$ is integrable, the integral of $f$ with respect to $\mu$ is called the \textbf{expected value of $f$} and is denoted by
\[
	\mathbb{E}[f] = \int f \, \mathrm{d}\mu
\]

Now let $L(S, \mathfrak{S}, \mu)$ denote the set of all $\mathfrak{S}$-measurable, real-valued functions on $S$ that are integrable with respect to $\mu$. How can we determine whether a function is integrable?

\begin{enumerate}
	\item If $f$ is bounded, measurable, real-valued function on $S$, and $\mu(S) < \infty$, then $f$ is $\mu$-integrable.
	\item $f$ is $\mu$-integrable iff. $|f|$ is $\mu$-integrable. In that case, $| \int f \, \mathrm{d}\mu| \leq \int |f| \, \mathrm{d}\mu$.
	\item If $f$ is $\mathfrak{S}$-measurable, $g$ is $\mu$-integrable, and $|f| \leq |g|$, then $f$ is $\mu$-integrable and $\int |f| \, \mathrm{d}\mu \leq \int |g| \, \mathrm{d}\mu$.
	\item If $f$ and $g$ are $\mu$-integrable and $\alpha \in \textbf{R}$, then $\alpha f$ and $f + g$ are $\mu$-integrable, satisfying the standard rules of calculus.
\end{enumerate}

\begin{theorem}[Lebesgue Dominated Convergence Theorem]
	Let $(S, \mathfrak{S}, \mu)$ be a measure space, and let $(f_n)$ be a sequence of integrable functions that converges almost everywhere to a measurable function $f$.If there exists an integrable function $g$ such that $|f_n| \leq g$ for all $n$, then $f$ is integrable and
	\[
		\int f \, \mathrm{d}\mu = \lim \int f_n \, \mathrm{d}\mu
	\]
\end{theorem}

\begin{definition}
	Let $\lambda$ and $\mu$ be finite measures on $(S, \mathfrak{S})$. If
	\[
		\mu(A) = 0 \implies \lambda(A) = 0 \, \forall A \in \mathfrak{S}
	\]
	then $\lambda$ is \textbf{absolutely continuous} with respect to $\mu$, written $\lambda << \mu$. 

	If there is $A \in \mathfrak{S}$ such that $\lambda(B) = \lambda(A \cap B)$, for all $B \in \mathfrak{S}$, then $\lambda$ is \textbf{concentrated on $A$}.

	If there are disjoint sets $A, B \in \mathfrak{S}$ such that $\lambda$ is concentrated on $A$ and $\mu$ is concentrated on $B$, then $\lambda$ and $\mu$ are \textbf{mutually singular}, written $\lambda \perp \mu$.
\end{definition}

\begin{theorem}[Radon-Nikodym Theorem]
	Let $\lambda$ and $\mu$ be $\sigma$-finite positive measures on $(S, \mathfrak{S})$ with $\lambda << \mu$. Then there exists an integrable function $h$ such that
	\[
		\lambda(A) = \int_A h(s) \, \mu(\mathrm{d}s), \, \text{ all } A \in \mathfrak{S}
	\]
	And the function $h$ is called the \textbf{Radon-Nikodym derivative} of $\lambda$ with respect to $\mu$.
\end{theorem}

\begin{lemma}
	Let $\lambda_1$ and $\lambda_2$ be finite measures on $(S, \mathfrak{S})$. Then there exists a triple of measures $\gamma, \alpha_1, \alpha_2$ such that
	\[
		\lambda_i = \gamma + \alpha_1
	\]
	where $i = 1, 2$, and $\alpha_1 \perp \alpha_2$.
\end{lemma}

\section{Product Spaces}

Let $(X, \mathfrak{X})$ and $(Y, \mathfrak{Y})$ be measurable spaces, and let $Z = X \times Y$.

Our first task is to define a $\sigma$-algebra of subsets of $Z$ that is a natural product of $\mathfrak{X}$ and $\mathfrak{Y}$.

\begin{definition}[Measurable rectangle]
	A set $C = A \times B \subseteq Z$ is a \textbf{measurable rectangle} if $A \in \mathfrak{X}$ and $B \in \mathfrak{Y}$.
\end{definition}

We denote by $\mathfrak{C}$ the set of all measurable rectangles and $\mathfrak{E}$ the set of all finite unions of measurable rectangles. Notice that $\mathfrak{E}$ is an algebra and that every set in $\mathfrak{E}$ can be written as the finite union of disjoint measurable rectangles.

\begin{definition}[Product Space]
	Let $\mathfrak{F} = \mathfrak{X} \times \mathfrak{Y}$ be the $\sigma$-algebra generated by $\mathfrak{E}$. The measurable space $(Z, \mathfrak{F})$ is called the \textbf{product space}.
\end{definition}

\begin{theorem}
	Let $(X, \mathfrak{X})$, $(Y, \mathfrak{Y})$, $\mathfrak{C}$, and $\mathfrak{E}$ be as specified above. Let $\mu : \mathfrak{C} \longrightarrow \textbf{R}_+$ have the following properties:
	\begin{itemize}
		\item $\mu(\emptyset) = 0$;
  		\item  If $(C_i) = ((A_i \times B_i))_{i=1}^\infty$ is a sequence of disjoint sets in $\mathfrak{C}$ and $\bigcup_{i=1}^\infty C_i$ is in $\mathfrak{C}$, then $\mu \left( \bigcup_{i=1}^\infty C_i \right) = \sum_{i=1}^\infty \mu(C_i)$.
	\end{itemize}
	Then there is a measure on $\mathfrak{E}$ that coincides with $\mu$ on $\mathfrak{C}$.
\end{theorem}

This theorem can be naturally extended to any space that is the product of a finite number of measurable spaces.

\begin{definition}
	Let $(X, \mathfrak{X})$ and $(Y, \mathfrak{Y})$ be measurable spaces, and let $(Z, \mathfrak{F})$ be the product space. And let $E \subseteq Z$ and $x \in X$. Then the \textbf{$x$-section of $E$} is the set $E_x = {y \in Y : (x, y) \in E}$. And the \textbf{$y$-section of $E$} is the set $E_y = {x \in X : (x, y) \in E}$.

	Let $f : Z \longrightarrow \textbf{R}$ and let $x \in X$. The \textbf{$x$-section of $f$} is the function $f_x : Y \longrightarrow \textbf{R}$ defined by $f_x(y) = f(x,y)$. And the \textbf{$y$-section of $f$} is the function $f_y : X \longrightarrow \textbf{R}$ defined by $f_y(x) = f(x,y)$.
\end{definition}

Intuitively, the $x$-section of a function is found by fixing $x$ and viewing $f$ only as a function of $y$.

\begin{theorem}
	Let $(X, \mathfrak{X})$ and $(Y, \mathfrak{Y})$ be measurable spaces, and let $(Z, \mathfrak{F})$ be the product space.
	\begin{enumerate}
		\item If the set $E$ in $Z$ is $\mathfrak{F}$-measurable, then every section of $E$ is measurable. 
		\item If the function $f : Z \longrightarrow \textbf{R}$ is $\mathfrak{F}$-measurable, then every section of $f$ is measurable. 
	\end{enumerate}
\end{theorem}

\section{The Monotone Class Lemma}

The main question that this section aims to answer is whether a propery $P$ holds at a given $\sigma$-algebra. 

\begin{definition}[Monotone Class]
	A \textbf{monotone class} is a nonempty collection $\mathfrak{M}$ of sets such that it contains
	\begin{enumerate}
		\item The union of every nested increasing sequence $A_1 \subseteq A_2 \subseteq \ldots $ of sets in $\mathfrak{M}$.
		\item The intersection of every nested decreasing sequence $A_1 \supseteq A_2 \supseteq \ldots $ of sets in $\mathfrak{M}$.
	\end{enumerate}
\end{definition}

Some important facts:
\begin{enumerate}
	\item Every $\sigma$-algebra is a monotone class.
	\item Given a nonempty collection of subsets of $S$, denoted by $\mathfrak{A}$, there exists a smallest monotone class containing $\mathfrak{A}$, which is called the monotone class generated by $\mathfrak{A}$.
	\item The $\sigma$-algebra generated by $\mathfrak{A}$ contains the monotone class generated by $\mathfrak{A}$.
	\item If a monotone class is an algebra, then it is a $\sigma$-algebra.
\end{enumerate}

\begin{lemma}[Monotone class]
	Leet $S$ be a set and let $\mathfrak{A}$ be an algebra of subsets of $S$. Then the monotone class $\mathfrak{M}$ generated by $\mathfrak{A}$ is the same as the $\sigma$-algebra $\mathfrak{S}$ generated by $\mathfrak{A}$.
\end{lemma}

Using this lemma, our original task in this section is solved. To establish that $P$ holds for all sets in a product $\sigma$-algebra, it suffices to show that 
\begin{enumerate}
	\item $P$ holds for all finite unions of disjoint measurable rectangles.
	\item The family of sets $\mathfrak{E}$ for which $P$ holds is a monotone class.
\end{enumerate}

\section{Modes of Convergence}

To the traditional ideas of convergence \textbf{pointwise} and \textbf{uniformly}, learned in an undergraduate course in Analysis, we'll add new forms of convergence, as the functions $f_n$ acquire an infinite and inequivalent number of ways to approach their limit $f$. 

Let $(X, \mathfrak{B}, \mu)$ be a measure space, and the functions $f_n$ (and their limit $f$) measurable with respect to this space. Then, we say that $f_n$ converges to $f$
\begin{enumerate}
	\item \textbf{pointwise almost everywhere} if, for $(\mu-)$almost everywhere $x \in X$, $f_n(x)$ converges to $f(x)$.
	\item \textbf{uniformly almost everywhere, essentially uniformly} , or \textbf{in $L^\infty$ norm} if, for every $\varepsilon > 0$, there exists $N$ such that for every $n \geq N$, \[ |f_n(x) - f(x)| \leq \varepsilon \] for $\mu$-almost every $x \in X$.
	\item \textbf{almost uniformly} if, for every $\varepsilon > 0$, there exists a set $E \in \mathfrak{B}$ of measure $\mu(E) \leq \varepsilon$ such that $f_n$ converges uniformly to $f$ on the complement of $E$.
	\item \textbf{in $L^1$ norm} if the quantity \[ \| f_n - f \|_{L^1(\mu)} = \int_x |f_n(x) - f(x)| ~\mathrm{d}\mu \] converges to $0$ as $n \to \infty$.
	\item \textbf{in measure} if, for every $\varepsilon > 0$, the measures \[ \mu (\{ x \in X : | f_n(x) - f(x) | \geq \varepsilon \}) \] converge to zero as $n \to \infty$.
\end{enumerate}

In probability theory, if $f_n$ and $f$ are random variables, convergence in $L^1$ is usually referred to as \textbf{convergence in mean}, pointwise convergence almost everywhere is referred to as \textbf{almost sure convergence}, and convergence in measure is often referred to as \textbf{convergence in probability}.

Recall that a property $P(x)$ is said to hold \textbf{almost everywhere} if the set of $x$ for which $P(x)$ fails has Lebesgue measure zero.

\section{Conditional Expectation}

Let $(\Omega, \mathfrak{F}, \mu)$ be a probability space.

\begin{definition}[Conditional Probability]
For a measurable set $A$ satisfying $\mu(A) > 0$ and for any measurable set $B$ we define the \textbf{conditional probability} of $B$ given $A$ as
\[
	\mu_A(B) := \frac{\mu(B \cap A)}{\mu(A)} 
\]
We'll also use $P(B | A)$ to denote this probability.
\end{definition}

Now notice that $\mu_A : \mathfrak{F} \longrightarrow [0,1]$, i.e., it is also a probability measure.

\begin{definition}[Conditional Expectation]
	The \textbf{conditional expectation} of $f$ given $A$ is defined as 
\[
	\mathbb{E} [f | A] = \int f ~\mathrm{d}\mu_A
\]
\end{definition}

\begin{definition}[Measurable Partition]
	A family ${A_\eta}_{\eta \in H}$ of subsets of $\Omega$ is a \textbf{measurable partition} of $\Omega$ if the following conditions hold:
	\begin{enumerate}
		\item $A_\eta \in \mathfrak{F}$, $\forall \eta \in H$.
		\item $\bigcup_{\eta \in H} A_\eta = H$.
		\item $A_\eta \cap A_{\eta'} = 0$, $\forall \eta \neq \eta'$.
	\end{enumerate}
	If the index set $H$ is countable, then we call the measurable partition \textbf{countable}.
\end{definition}

To formalize it better, extending the concept to $\sigma$-algebras not generated by a countable partition, we'll introduce the following.

\begin{definition}[Conditional Expectation]
	Let $A \subset \mathfrak{F}$ be a $\sigma$-algebra and let $f : \Omega \longrightarrow \textbf{R}$ be an integrable function. Then the \textbf{conditional expectation of $f$ relative to $A$} is an $\mathfrak{A}$-measurable function $\mathbb{E}[f | \mathfrak{A}] : \Omega \longrightarrow \textbf{R}$ such that
	\[
		\int_C \mathbb{E}[f | \mathfrak{A}](\omega) \mu ~(\mathrm{d} \omega) = \int_C f(\omega) \mu ~(\mathrm{d} \omega), \, \forall C \in \mathfrak{A}
	\]
\end{definition}

It can be proved that this function exists and is unique in the sense that if $g$ also satisties the condition above, then $\mathbb{E}[f | \mathfrak{A}] = g$.

Notice that to compute conditional probability $P(B | A_\eta)$ we may take $f$ to be the indicator function $\chi_B$. Then
\[
	\mathbb{E}[\chi_B | \mathfrak{A}](\hat{\omega}) \mu(A_\eta) = \int_{A_\eta} \chi_b ~\mathrm{d}\mu = \mu(B \cap A_\eta)
\]
for all $\hat{\omega} \in A_\eta$, all $\eta \in H$.

If $\mu(A_\eta) > 0$, then
\[
	\mathbb{E}[\chi_B | \mathfrak{A}](\hat{\omega}) = \frac{\mu(B \cap A_\eta)}{\mu(A_\eta)}
\]

Summarizing this fact,
\[
	P(B | A_\eta) = \mathbb{E}[\chi_B | \mathfrak{A}](\hat{\omega})
\]
for all $\hat{\omega} \in A_\eta$, all $\eta \in H$.

We end this section with an important property of conditional expectations. Let $\mathfrak{A}_1 \subseteq \mathfrak{A}_2 \subseteq \mathfrak{F}$. Then we have
\begin{equation*}
	\begin{aligned}
		\int_C \mathbb{E} [\mathbb{E}(f | \mathfrak{A}_2) | \mathfrak{A}_1] ~\mathrm{d}\mu &= \int_c \mathbb{E}(f | \mathfrak{A}_2)(\omega) ~\mathrm{d}\mu \\
		&= \int_C f(\omega) ~\mathrm{d}\mu \\
		&= \int_C \mathbb{E} [f | \mathfrak{A}_1](\omega) ~\mathrm{d}\mu, \, \forall C \in \mathfrak{A}_1
	\end{aligned}
\end{equation*}

This is known as the \textbf{law of the iterated expectation}. To state it in another way,
\[
	\int_C \mathbb{E} [f - \mathbb{E}(f | \mathfrak{A}_2) | \mathfrak{A}_1] ~\mathrm{d}\mu = 0, \, \forall C \in \mathfrak{A}_1
\]